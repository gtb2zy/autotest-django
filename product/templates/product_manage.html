{% extends 'base_list.html' %}

{# 导航栏 #}
{% block navbar %}
    <li>
        <a href="{% url 'product_manage' %}">产品列表</a>
    </li>
{% endblock %}

{# 搜索和添加功能 #}
{% block search_add %}
    <li>
        <form class="navbar-form" action="{% url 'prosearch' %}" method="GET" role="search">
                <div class="form-group">
                    <input type="search" name="productname" class="form-control" placeholder="产品名称">
                </div>
                <button type="submit" class="btn btn-default">搜索</button>
                <button type="submit" class="btn btn-default">
                    <a href="{% url 'product_manage' %}" style="color: rgb(51, 51, 51);">全部</a>
                </button>
                <button type="submit" class="btn btn-default" href="/apitest/apis_manage/">
                    <a class="related-widget-wrapper-link add-related" 
                        id="add_id_Product" 
                        href="/admin/product/product/add/?_to_field=id&amp;_popup=1" 
                        title="添加另一个产品" style="color: rgb(51, 51, 51);">
                        添加
                    </a>
                </button>
        </form>
    </li>
{% endblock %}

{# 表格头部 #}
{% block thead %}
<tr>
    <th>产品名称</th>
    <th>产品描述</th>
    <th>产品负责人</th>
    <th>创建时间</th>
    <th>编辑</th>
    <th>删除</th>
</tr>
{% endblock %}

{# 表格主体 #}
{% block tbody %}
    {% for product in products %}
        <tr>
            <td><a href="{% url "apis_manage" %}">
                {{product.productname}}
                </a>
            </td>
            <td>{{product.productdesc}}</td>
            <td>{{product.producter}}</td>
            <td>{{product.create_time}}</td>
            <td><a style='color:light blue' class="related-widget-wrapper-link add-related" id="add_id_Product" href="/admin/product/product/{{ product.id  }}/change/?_to_field=id&_popup=1"><img src="/static/admin/img/icon-changelink.svg"/></a></td>
            <td><a style='color:light blue' class="related-widget-wrapper-link add-related" id="add_id_Product" href="/admin/product/product/{{ product.id  }}/delete/?_to_field=id&_popup=1"><img src="/static/admin/img/icon-deletelink.svg"/></a></td>
        </tr>
    {% endfor %}
{% endblock %}

{# 显示数量 #}
{% block count %}
    共{{ products|length }}条记录
{% endblock %}

{# 翻页 #}
{% block pager %}
    {# 上一页链接开始#}
    {% if products.has_previous %}
        {#  如果有上一页则正常显示上一页链接#}
        <li><a href="/product/product_manage/?page={{ products.previous_page_number }}">上一页</a></li>    {#  上一页标签 #}
    {% else %}
        <li class="disabled"><a href="#">上一页</a></li> {# 如果当前不存在上一页则上一页的链接不可点击#}
    {% endif %}
    {# 上一页链接开始#}

    {% for num in products.paginator.page_range %}

        {% if num == currentPage %}
            <li class="active"><a href="/product/product_manage/?page={{ num }}">{{ num }}</a></li> {#显示当页数链接#} 
        {% else %}
            <li><a href="/product/product_manage/?page={{ num }}">{{ num }}</a></li>
        {% endif %}
    {% endfor %}

    {# 下一页链接开始#}
    {% if products.has_next %} {#  如果有下一页则正常显示下一页链接#}
        <li><a href="/product/product_manage/?page={{ products.next_page_number }}">下一页</a></li>
    {% else %}
        <li class="disabled"><a href="#">下一页</a></li>
    {% endif %}
    {# 下一页链接结束#}
{% endblock %} 