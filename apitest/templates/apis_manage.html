{% extends 'base_list.html' %}

{# 导航栏 #}
{% block navbar %}
    <li class="active"><a href="{% url 'apis_manage' %}">api用例</a></li>
    <!-- <li><a href="{% url 'apitest_manage' %}">流程接口</a></li> -->
    <li><a href="{% url 'appcase_manage' %}">app用例</a></li>
    <li><a href="{% url 'webcase_manage' %}">web用例</a></li>
{% endblock %}

{# 搜索和添加功能 #}
{% block search_add %}
    <li>
        <form class="navbar-form" action="{% url 'apissearch' %}" method="GET" role="search">
                <div class="form-group">
                    <input type="search" name="apiname" class="form-control" placeholder="后端模块">
                </div>
                <button type="submit" class="btn btn-default">搜索</button>
                <button type="submit" class="btn btn-default">
                    <a href="{% url 'apis_manage' %}" style="color: rgb(51, 51, 51);">全部</a>
                </button>
                <button type="submit" class="btn btn-default" href="/apitest/apis_manage/">
                    <a class="related-widget-wrapper-link add-related" id="add_id_Apis" href="/admin/apitest/apis/add/?_to_field=id&amp;_popup=1" title="增加另一个 测试用例" style="color: rgb(51, 51, 51);">
                        添加
                    </a>
                </button>
        </form>
    </li>
{% endblock %}

{# 表格头部 #}
{% block thead %}
    <tr>
        <th>产品</th>
        <th>后端模块</th>
        <th>URL地址</th>
        <th>测试结果</th>
        <th>创建时间</th>
        <th>修改时间</th>
        <th>编辑</th>
        <th>删除</th>
    </tr>
{% endblock %}

{# 表格主体 #}
{% block tbody %}
    {% for apis in apiss %}
    <tr>
        <td>{{ apis.Product.productname }}</td>
        <td><a href="{% url "apiinfos_manage" %}?apis.id={{ apis.id }}">
            {{ apis.apiname }}
            </a>
        </td>
        <td>{{ apis.apiurl }}</td>
        <td>{% if apis.apistatus == 1 %}
                <a style='color:green'>{{ apis.apistatus }}</a> 
                {% else %}
                <a style='color:red'>{{ apis.apistatus }}</a> 
                {% endif %}
        </td>
        <td>{{ apis.create_time }}</td>
        <td>{{ apis.update_time }}</td>
        <!-- <td><a href="{% url "apiinfos_manage" %}?apis.id={{ apis.id }}">
            <img src="/static/admin/img/icon-yes.svg"/>
        </a></td> -->
        <td><a style='color:light blue' 
                class="related-widget-wrapper-link add-related" 
                id="add_id_Apis" 
                href="/admin/apitest/apis/{{ apis.id  }}/change/?_to_field=id&amp;_popup=1">
                <img src="/static/admin/img/icon-changelink.svg"/>
            </a>
        </td>
        <td><a style='color:light blue' 
                class="related-widget-wrapper-link add-related" 
                id="add_id_Apis" 
                href="/admin/apitest/apis/{{ apis.id  }}/delete/?_to_field=id&amp;_popup=1">
                <img src="/static/admin/img/icon-deletelink.svg"/>
            </a>
        </td>
    <tr />
    {% endfor %}
{% endblock %}

{# 显示数量 #}
{% block count %}
    共{{ apiss|length }}条记录
{% endblock %}

{# 翻页 #}
{% block pager %}
    {# 上一页链接开始#}
    {% if apiss.has_previous %}
        {#  如果有上一页则正常显示上一页链接#}
        <li class=""><a href="?page={{ apiss.previous_page_number }}">&laquo;</a></li>    {#  上一页标签 #}
    {% else %}
        <li class="disabled"><a href="#">&laquo;</a></li> {# 如果当前不存在上一页则上一页的链接不可点击#}
    {% endif %}
    {# 上一页链接开始#}

    {% for num in page_range %}     
        {% if num == apiss.number %}
            <li class="active"><a href="?page={{ num }}">{{ num }}</a></li> {#显示当页数链接#} 
        {% else %}
            <li><a href="?page={{ num }}">{{ num }}</a></li>
        {% endif %}
    {% endfor %}

    {# 下一页链接开始#}
    {% if apiss.has_next %} {#  如果有下一页则正常显示下一页链接#}
        <li><a href="?page={{ apiss.next_page_number }}">&raquo;</a></li>
    {% else %}
        <li class="disabled"><a href="#">&raquo;</a></li>
    {% endif %}
    {# 下一页链接结束#}
{% endblock %} 